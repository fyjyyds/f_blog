# F_Blog 需求文档

## 1. 项目概述

### 1.1 项目背景
F_Blog 是一个现代化的博客系统，旨在为用户提供完整的博客创作和分享平台。系统采用前后端分离架构，提供丰富的功能和良好的用户体验。系统支持普通用户和管理员两种角色，确保内容质量和系统管理。

### 1.2 项目目标
- 构建一个功能完整、性能优异的博客系统
- 提供直观易用的用户界面
- 支持多种内容创作和分享方式
- 建立活跃的用户社区
- 实现完善的权限管理和内容审核机制

### 1.3 目标用户
- **普通用户**：个人博主、技术分享者、内容创作者、文章阅读者
- **管理员**：系统管理员、内容审核员

## 2. 功能需求

### 2.1 用户管理模块

#### 2.1.1 用户注册
**功能描述**: 新用户可以通过注册功能创建账户，注册后才能查看文章，进入页面时默认为未登录状态

**详细需求**:
- 注册表单包含：用户名、邮箱、密码、确认密码
- 用户名：3-20个字符，只能包含字母、数字、下划线
- 邮箱：必须是有效的邮箱格式
- 密码：8-20个字符，必须包含字母和数字
- 邮箱验证：注册后发送验证邮件
- 防止重复注册：用户名和邮箱唯一性检查
- 注册成功后自动分配普通用户角色

**API接口**:
```
POST /api/v1/auth/register
POST /api/v1/auth/verify-email
```

#### 2.1.2 用户登录
**功能描述**: 已注册用户可以通过登录功能访问系统

**详细需求**:
- 支持用户名/邮箱 + 密码登录
- JWT token认证
- 记住登录状态（1天）
- 支持第三方登录（GitHub、Google）//待开发
- 登录后根据用户角色显示不同功能菜单

**API接口**:
```
POST /api/v1/auth/login
POST /api/v1/auth/logout
POST /api/v1/auth/refresh-token
```

#### 2.1.3 个人资料管理
**功能描述**: 用户可以管理个人信息和设置

**详细需求**:
- 基本信息：昵称、个人简介、性别、生日
- 联系方式：邮箱、手机号、个人网站
- 社交媒体：GitHub、Twitter、LinkedIn//待开发
- 隐私设置：是否公开个人信息//待开发
- 密码修改功能
- 用户角色显示（普通用户/管理员）

**API接口**:
```
GET /api/v1/user/profile
PUT /api/v1/user/profile
PUT /api/v1/user/password
```

#### 2.1.4 头像上传
**功能描述**: 用户可以上传和更换个人头像

**详细需求**:
- 支持JPG、PNG、GIF格式
- 文件大小限制：2MB
- 自动裁剪和压缩
- 支持拖拽上传
- 实时预览功能

**API接口**:
```
POST /api/v1/user/avatar
DELETE /api/v1/user/avatar
```

#### 2.1.5 权限管理
**功能描述**: 管理员可以管理用户权限和角色

**详细需求**:
- 用户角色：普通用户、管理员
- 管理员可以提升/降级用户角色
- 管理员可以禁用/启用用户账户
- 权限控制：不同角色访问不同功能
- 操作日志记录

**API接口**:
```
GET /api/v1/admin/users
PUT /api/v1/admin/users/{id}/role
PUT /api/v1/admin/users/{id}/status
```

### 2.2 文章管理模块

#### 2.2.1 文章发布
**功能描述**: 用户可以创建和发布文章

**详细需求**:
- 富文本编辑器（支持Markdown）
- 文章标题、内容、摘要
- 封面图片上传
- 文章分类和标签选择
- 发布状态：草稿、发布、私密
- 定时发布功能
- 自动保存草稿
- 文章审核机制（管理员审核）

**API接口**:
```
POST /api/v1/articles
PUT /api/v1/articles/{id}
DELETE /api/v1/articles/{id}
```

#### 2.2.2 文章列表展示
**功能描述**: 展示文章列表，支持多种排序和筛选

**详细需求**:
- 分页显示（每页20篇）
- 排序方式：最新、最热、最多评论
- 筛选条件：分类、标签、作者、时间范围
- 搜索功能：标题、内容、标签
- 响应式布局
- 未登录用户只能查看文章标题和摘要

**API接口**:
```
GET /api/v1/articles
GET /api/v1/articles/search
```

#### 2.2.3 文章详情页
**功能描述**: 展示文章的完整内容和相关信息

**详细需求**:
- 文章内容展示（需要登录才能查看完整内容）
- 作者信息
- 发布时间、阅读量、点赞数
- 相关文章推荐
- 分享功能
- 目录导航（长文章）
- 文章状态显示（已发布、审核中、已拒绝）

**API接口**:
```
GET /api/v1/articles/{id}
POST /api/v1/articles/{id}/view
```

#### 2.2.4 文章分类和标签
**功能描述**: 管理文章的分类和标签系统，管理员可以增加删除分类，用户发表文章时可选择分类，查看文章也可以按分类进行查看

**详细需求**:
- 分类管理：管理员创建、编辑、删除分类
- 标签管理：用户创建标签，管理员审核
- 分类和标签的层级结构
- 热门分类和标签展示
- 标签云功能
- 分类权限控制：普通用户只能查看已启用的分类

**API接口**:
```
GET /api/v1/categories
POST /api/v1/categories (管理员)
PUT /api/v1/categories/{id} (管理员)
DELETE /api/v1/categories/{id} (管理员)
GET /api/v1/tags
POST /api/v1/tags
```

#### 2.2.5 文章搜索
**功能描述**: 提供强大的文章搜索功能

**详细需求**:
- 全文搜索（标题、内容、标签）
- 高级搜索：作者、分类、时间范围
- 搜索结果高亮
- 搜索历史记录
- 热门搜索词
- 搜索结果权限控制

**API接口**:
```
GET /api/v1/search
GET /api/v1/search/suggestions
```

#### 2.2.6 管理员文章管理
**功能描述**: 管理员可以管理所有文章，包括审核、编辑、删除

**详细需求**:
- 文章审核：审核待发布文章
- 文章编辑：编辑任何用户的文章
- 文章删除：删除违规文章
- 批量操作：批量审核、删除
- 审核日志记录
- 文章统计：发布数量、审核状态统计

**API接口**:
```
GET /api/v1/admin/articles
PUT /api/v1/admin/articles/{id}/status
DELETE /api/v1/admin/articles/{id}
POST /api/v1/admin/articles/batch-action
```

### 2.3 评论系统

#### 2.3.1 文章评论功能
**功能描述**: 登录用户可以对文章进行评论

**详细需求**:
- 评论内容支持Markdown
- 评论分页显示
- 评论时间显示
- 评论者信息展示
- 评论审核机制（管理员审核）
- 评论权限控制：只有登录用户才能评论

**API接口**:
```
GET /api/v1/articles/{id}/comments
POST /api/v1/articles/{id}/comments
DELETE /api/v1/comments/{id}
```

#### 2.3.2 评论回复功能
**功能描述**: 支持评论的嵌套回复

**详细需求**:
- 多级回复支持
- 回复通知
- 回复内容展示
- 回复数量统计
- 回复权限控制

**API接口**:
```
POST /api/v1/comments/{id}/replies
GET /api/v1/comments/{id}/replies
```

### 2.4 首页功能

#### 2.4.1 轮播图展示
**功能描述**: 首页轮播图展示重要内容

**详细需求**:
- 轮播图管理后台（管理员功能）
- 支持多张图片轮播
- 轮播图链接跳转
- 自动播放和手动切换
- 响应式适配

**API接口**:
```
GET /api/v1/banners
POST /api/v1/banners (管理员)
PUT /api/v1/banners/{id} (管理员)
DELETE /api/v1/banners/{id} (管理员)
```

#### 2.4.2 最新文章展示
**功能描述**: 展示最新发布的文章

**详细需求**:
- 最新文章列表（12篇）
- 文章摘要显示
- 作者信息和发布时间
- 阅读量和点赞数
- 点击跳转到详情页
- 权限控制：未登录用户只能看到标题和摘要

#### 2.4.3 热门文章展示
**功能描述**: 展示最受欢迎的文章

**详细需求**:
- 基于阅读量、点赞数、评论数计算热度
- 热门文章列表（10篇）
- 热度指数显示
- 更新时间：每日更新
- 权限控制：未登录用户只能看到标题和摘要

### 2.5 其他功能

#### 2.5.1 文章点赞
**功能描述**: 登录用户可以对文章进行点赞

**详细需求**:
- 点赞/取消点赞功能
- 点赞数量统计
- 点赞用户列表
- 防止重复点赞
- 权限控制：只有登录用户才能点赞

**API接口**:
```
POST /api/v1/articles/{id}/like
DELETE /api/v1/articles/{id}/like
GET /api/v1/articles/{id}/likes
```

#### 2.5.2 用户关注
**功能描述**: 登录用户可以关注其他用户

**详细需求**:
- 关注/取消关注功能
- 关注列表和粉丝列表
- 关注数量统计
- 关注动态推送
- 权限控制：只有登录用户才能关注

**API接口**:
```
POST /api/v1/users/{id}/follow
DELETE /api/v1/users/{id}/follow
GET /api/v1/users/{id}/followers
GET /api/v1/users/{id}/following
```

#### 2.5.3 通知系统
**功能描述**: 系统消息和用户互动通知

**详细需求**:
- 通知类型：评论、点赞、关注、系统消息、审核结果
- 实时通知推送
- 通知列表和详情
- 通知状态：已读/未读
- 通知设置
- 权限控制：只有登录用户才能接收通知

**API接口**:
```
GET /api/v1/notifications
PUT /api/v1/notifications/{id}/read
DELETE /api/v1/notifications/{id}
```

## 3. 非功能需求

### 3.1 性能需求
- 页面加载时间 < 2秒
- 支持1000+并发用户
- 数据库查询响应时间 < 100ms
- 图片加载优化

### 3.2 安全需求
- 用户密码加密存储
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 文件上传安全检查
- 权限验证和访问控制
- 敏感操作日志记录

### 3.3 可用性需求
- 系统可用性 > 99.9%
- 响应式设计，支持移动端
- 浏览器兼容性：Chrome、Firefox、Safari、Edge
- 友好的错误提示和引导

### 3.4 可扩展性需求
- 微服务架构支持
- 水平扩展能力
- 模块化设计
- 插件化功能扩展

## 4. 数据库设计

### 4.1 主要数据表
- users（用户表）
- user_roles（用户角色表）
- articles（文章表）
- categories（分类表）
- tags（标签表）
- article_tags（文章标签关联表）
- comments（评论表）
- likes（点赞表）
- follows（关注表）
- notifications（通知表）
- banners（轮播图表）
- audit_logs（审核日志表）

### 4.2 数据库配置
- MySQL 8.0+
- 字符集：utf8mb4
- 存储引擎：InnoDB
- 连接池配置

## 5. 技术架构

### 5.1 后端架构
- Gin Web框架
- GORM ORM框架
- JWT认证
- Redis缓存
- 中间件架构
- 权限控制中间件

### 5.2 前端架构
- Vue.js 3 + TypeScript
- Element Plus UI组件
- Pinia状态管理
- Vue Router路由管理
- Axios HTTP客户端
- 权限路由控制

## 6. 开发计划

### 6.1 第一阶段（2周）
- 项目初始化和环境搭建
- 数据库设计和创建
- 用户管理模块开发
- 基础权限系统

### 6.2 第二阶段（3周）
- 文章管理模块开发
- 文件上传功能
- 基础前端界面
- 管理员后台

### 6.3 第三阶段（2周）
- 评论系统开发
- 搜索功能实现
- 前端界面完善
- 权限控制完善

### 6.4 第四阶段（2周）
- 点赞和关注功能
- 通知系统
- 系统测试和优化
- 安全加固

### 6.5 第五阶段（1周）
- 部署配置
- 文档完善
- 上线准备
- 性能优化

## 7. 风险评估

### 7.1 技术风险
- 性能优化挑战
- 安全性要求
- 第三方依赖稳定性
- 权限控制复杂性

### 7.2 项目风险
- 开发时间估算
- 需求变更影响
- 测试覆盖度
- 用户体验设计

## 8. 验收标准

### 8.1 功能验收
- 所有核心功能正常运行
- 用户界面友好易用
- 数据一致性保证
- 权限控制正确

### 8.2 性能验收
- 响应时间满足要求
- 并发处理能力达标
- 系统稳定性良好
- 数据库性能优化

### 8.3 安全验收
- 通过安全测试
- 数据保护措施有效
- 权限控制正确
- 敏感信息保护 